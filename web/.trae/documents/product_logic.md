# 产品逻辑与功能总结报告

## 1. 核心玩法：AI 助记词套取攻防战

### 1.1 基础机制
*   **目标**：玩家需要通过与 AI 对话，套取出 AI 守护的“助记词”（Secret Word）。
*   **关卡制**：共设 **6 个关卡** (Level 1 - Level 6)，难度递增。
    *   Level 1：完全无防备，直接给。
    *   Level 2+：AI 会尝试拒绝直接给出，需要玩家使用套话技巧（Prompt Injection）。
*   **助记词生成**：
    *   **一次性生成**：玩家进入游戏时，系统一次性随机生成 6 个互不重复的助记词，分别对应 6 个关卡。
    *   **持久性**：关卡间切换不会改变已生成的助记词，保证线索的连贯性。

### 1.2 游戏流程
1.  **选择关卡**：玩家只能选择“已通关 + 1”范围内的关卡（例如通了 L1，才能玩 L2）。
2.  **对话博弈**：
    *   玩家在左侧聊天框输入 Prompt（“尝试问出 AI 的助记词”）。
    *   AI 根据当前关卡的 System Prompt 规则进行回复（防守）。
3.  **验证答案**：
    *   玩家在右侧输入框提交猜测的助记词（自动转大写）。
    *   **正确**：
        *   触发“彩带特效”🎉。
        *   AI 认输：“AI安全被你成功破解了！”。
        *   解锁下一关按钮。
        *   右侧“已破解助记词”卡片点亮对应词汇。
    *   **错误**：
        *   AI 嘲讽：“你别想知道我的助记词”。
        *   提示框显示错误（支持渐出特效）。

## 2. 辅助系统

### 2.1 积分与锦囊商城
*   **积分体系**：初始 100 积分，用于购买锦囊。
*   **锦囊（Hint）**：
    *   **种类**：初级（10分）、中级（20分）、高级（50分）。
    *   **购买逻辑**：
        *   积分充足：扣费 -> 弹窗展示锦囊内容 -> 记录到“已获得锦囊”列表。
        *   积分不足：自动触发“充值弹窗”。
*   **充值系统**：
    *   提供“输入金额”和“一键填入差额”功能。
    *   模拟充值过程，直接增加积分。

### 2.2 数据看板（右侧边栏）
*   **Tab 1：看板**
    *   **计时器**：显示总游戏时长和当前关卡耗时。
    *   **关卡进度**：显示已破解数量（如 2/6）及进度条。
    *   **助记词记录卡**：展示 1-6 号位的助记词，未破解显示“????”，已破解显示明文。
*   **Tab 2：锦囊**
    *   **商城列表**：展示可购买的锦囊。
    *   **已获得列表**：展示已购买的历史锦囊，支持点击“查看”回顾内容。

### 2.3 钱包连接
*   **MetaMask 集成**：提供连接钱包功能。
*   **状态联动**：充值按钮在未连接钱包时呈灰色禁用状态，连接后变绿可用。

## 3. 注意事项 & 边界条件

### 3.1 状态管理
*   **刷新重置**：
    *   **会保留**：已通关卡进度 (`completedLevels`) 存在 LocalStorage。
    *   **会重置**：积分、已购买锦囊、当前生成的助记词组（刷新后会生成一组全新的 6 个词，导致旧线索失效）。
    *   *注：这是一个设计取舍，若要保留助记词，需存入 LocalStorage，但可能导致玩家作弊。*

### 3.2 交互细节
*   **输入限制**：验证答案时，输入框强制大写。
*   **AI 发言**：购买锦囊**不会**干扰 AI 的对话历史，锦囊内容仅在弹窗展示。
*   **关卡锁定**：不能跳关，必须线性解锁。

### 3.3 视觉反馈
*   **自适应**：Image Mode 会根据状态变化（默认/胜利/失败），AI 头像框有不同边框颜色。
*   **彩蛋**：通关时有全屏彩带。
